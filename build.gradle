plugins {
	id "nebula.lint" version "8.2.2"
	id "net.saliman.properties" version "1.4.6"
	id "application"
}

def browser = hasProperty("browser") ? browser : "firefox"
def browserScript = file("gradle/${browser}-env.gradle")

if (!browserScript.exists()) {
	throw new GradleException("Unknown browser: ${browser}")
}

apply from: browserScript

gradleLint.rules = ["all-dependency"]

dependencies {
	compile "org.seleniumhq.selenium:selenium-firefox-driver:3.5.2"
	compile "org.seleniumhq.selenium:selenium-chrome-driver:3.5.2"
	compile "org.seleniumhq.selenium:selenium-api:3.5.2"
	compile "org.seleniumhq.selenium:selenium-support:3.5.2"
	runtime "ch.qos.logback:logback-classic:1.2.3"
}

run {
	mainClassName = "me.khyen.test.JavaSandBox"

	if (project.hasProperty("execArgs")) {
		args project.getProperty("execArgs").split()
	}

	environment("browser", browser)
}

repositories {
	jcenter()
}
